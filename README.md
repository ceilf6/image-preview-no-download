# 图片预览器 Chrome 扩展

一个Chrome扩展，用于阻止图片链接的自动下载行为，改为在新窗口中预览图片。

## 功能特性

- 🖼️ **智能检测**: 自动识别页面中的图片链接
- 🚫 **阻止下载**: 防止点击图片链接时自动下载
- 👁️ **预览模式**: 在新窗口中优雅地预览图片
- 📋 **复制功能**: 支持复制图片到剪贴板
- 💾 **下载选项**: 提供手动下载功能
- ⌨️ **快捷键**: 支持键盘快捷操作

## 支持的图片格式

- JPG, JPEG, PNG, GIF, WebP, SVG, BMP, ICO
- 包含关键词的链接：image, img, photo, picture, pic

## 安装方法

### 方法一：开发者模式安装（推荐）

1. 打开Chrome浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择包含扩展文件的文件夹
6. 扩展安装完成

### 方法二：打包安装

1. 在扩展管理页面点击"打包扩展程序"
2. 选择扩展文件夹，生成 `.crx` 文件
3. 将 `.crx` 文件拖拽到扩展管理页面安装

## 使用说明

### 基本使用

1. **启用扩展**: 点击浏览器工具栏中的扩展图标
2. **开启预览**: 在弹出窗口中点击"启用预览模式"
3. **预览图片**: 在网页中点击图片链接，将在新窗口中预览
4. **复制/下载**: 在预览窗口中使用相应按钮或快捷键

### 快捷键

在图片预览窗口中：
- `Ctrl+C` (Mac: `Cmd+C`): 复制图片到剪贴板
- `Ctrl+S` (Mac: `Cmd+S`): 下载图片到本地
- `Esc`: 关闭预览窗口

### 状态指示

- 🟢 **绿色圆点**: 预览模式已启用
- 🔴 **红色圆点**: 预览模式已禁用
- **链接计数**: 显示当前页面检测到的图片链接数量

## 技术实现

### 核心机制

1. **链接检测**: 通过URL模式和关键词识别图片链接
2. **事件拦截**: 使用 `addEventListener` 拦截点击事件
3. **跨域处理**: 优先使用 Fetch API，失败时回退到 iframe 方式
4. **动态监听**: 使用 `MutationObserver` 监听动态添加的链接

### 文件结构

```
图片预览器/
├── manifest.json      # 扩展清单文件
├── content.js         # 内容脚本
├── popup.html         # 弹出窗口界面
├── popup.js           # 弹出窗口逻辑
├── icon16.png         # 16x16 图标
├── icon48.png         # 48x48 图标
├── icon128.png        # 128x128 图标
└── README.md          # 说明文档
```

## 兼容性

- **浏览器**: Chrome 88+, Edge 88+
- **权限**: 需要访问活动标签页和存储权限
- **限制**: 不支持Chrome内部页面 (chrome://)

## 故障排除

### 常见问题

**Q: 点击图片链接仍然自动下载？**
A: 请确保：
1. 扩展已启用预览模式
2. 浏览器允许弹窗
3. 刷新页面后重试

**Q: 预览窗口无法打开？**
A: 检查浏览器弹窗设置，允许该网站的弹窗

**Q: 复制图片功能不工作？**
A: 确保浏览器支持 Clipboard API，某些旧版本可能不支持

**Q: 扩展在某些网站不工作？**
A: 可能是跨域限制，扩展会自动回退到备用方案

### 调试方法

1. 打开开发者工具 (F12)
2. 查看控制台是否有错误信息
3. 检查扩展是否正确加载
4. 确认页面中存在图片链接

## 隐私说明

- 扩展仅在本地处理数据，不上传任何信息
- 不收集用户浏览记录或个人信息
- 图片预览通过本地处理，保护用户隐私

## 更新日志

### v1.0.0
- 初始版本发布
- 支持基本的图片链接预览功能
- 提供复制和下载功能
- 支持键盘快捷键操作

## 开发说明

如需修改或扩展功能：

1. 修改 `content.js` 来调整链接检测逻辑
2. 修改 `popup.html/js` 来调整界面和交互
3. 修改 `manifest.json` 来调整权限和配置

## 许可证

MIT License - 可自由使用和修改

## 反馈与支持

如遇到问题或有改进建议，请通过以下方式反馈：
- 在使用过程中遇到的任何问题
- 功能改进建议
- 兼容性问题报告